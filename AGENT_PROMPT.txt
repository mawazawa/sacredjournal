===================================================================
PROMPT FOR CLOUD CODE WEB AGENT - SACRED JOURNAL PROJECT
===================================================================

You are taking over development of Sacred Journal, a personality-aware AI journaling application built with Next.js 16, React 19, and TypeScript.

REPOSITORY: https://github.com/mawazawa/sacredjournal

KEY DOCUMENTS TO READ (IN THIS ORDER):
1. HANDOFF_TO_WEB_AGENT.md - Project overview and 18-item checklist
2. CLOUD_CODE_WEB_PROMPT.md - Detailed implementation guide
3. QUICK_START.md - Quick reference for common tasks
4. RESEARCH.md - Feature specifications and architecture

PROJECT STATUS:
‚úÖ Next.js scaffold complete
‚úÖ All dependencies installed
‚úÖ Home page with feature showcase
‚úÖ Component scaffolding (VoiceButton, stores, hooks)
‚úÖ Documentation complete
‚ùå Authentication NOT implemented
‚ùå Database schema NOT created
‚ùå Core features NOT built

YOUR MISSION - PHASE 1 MVP (18 ITEMS):

AUTHENTICATION (3):
[ ] Set up Supabase auth with email/password and OAuth
[ ] Create signup and signin pages with forms
[ ] Implement protected routes and auth guard middleware

DATABASE (2):
[ ] Create Supabase schema: users, entries, conversations, messages, entities
[ ] Set up Row Level Security policies for data isolation

CORE JOURNALING (4):
[ ] Build Big Five personality assessment questionnaire
[ ] Create text entry creation/editing interface with rich text
[ ] Build entry list component with search and filters
[ ] Implement voice recording ‚Üí DeepGram transcription ‚Üí entry save flow

AI COACHING (2):
[ ] Integrate Gemini 3 Pro Live API for real-time conversation
[ ] Create chat interface with personality-aware system prompts

UI & UX (4):
[ ] Create dashboard/home for authenticated users
[ ] Build entry detail view and edit interface
[ ] Add loading states and skeleton screens
[ ] Implement error handling and form validation

API ENDPOINTS (3):
[ ] Build CRUD endpoints for entries (/api/entries)
[ ] Create voice transcription endpoint (/api/transcribe with DeepGram)
[ ] Build coaching conversation endpoint (/api/coaching with Gemini)

SUCCESS CRITERIA:
‚úÖ All 18 checklist items implemented
‚úÖ Build passes: npm run build
‚úÖ No TypeScript errors
‚úÖ Authentication flow working (signup ‚Üí quiz ‚Üí dashboard)
‚úÖ Can create and view journal entries
‚úÖ Voice recording ‚Üí transcription working
‚úÖ Real-time AI coaching functional
‚úÖ Basic E2E tests for key flows
‚úÖ Deployed to Vercel

TECH STACK:
- Frontend: Next.js 16, React 19, TypeScript, Tailwind CSS 4, Framer Motion, Zustand
- Backend: Node.js 22+, Supabase PostgreSQL, Row Level Security
- APIs: Gemini 3 Pro, DeepGram Nova-3
- Deployment: Vercel

REQUIRED ENVIRONMENT VARIABLES:
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
GEMINI_API_KEY=
DEEPGRAM_API_KEY=
NEXT_PUBLIC_APP_URL=http://localhost:3000

KEY IMPLEMENTATION NOTES:

1. PERSONALITY AWARENESS
   - Store Big Five scores (Openness, Conscientiousness, Extraversion, Agreeableness, Neuroticism)
   - Include personality profile in every Gemini system prompt
   - Customize persuasion strategies based on personality type

2. VOICE-FIRST MENTALITY
   - Minimize visual clutter
   - Voice guidance preferred over text
   - Eyes-closed experience for meditation/journaling
   - Measure success by screen time REDUCTION

3. MULTIMODAL INPUT
   - Text entry via rich text editor
   - Voice recording via MediaRecorder API
   - Send voice to DeepGram API for transcription
   - Store entry source (text, voice, email, image)

4. REAL-TIME AI
   - Use Gemini Live API for streaming responses
   - Store conversation history in DB
   - Context-aware responses based on user's entries and personality

5. DATABASE SECURITY
   - Use Supabase Row Level Security for all tables
   - Never expose service role key to frontend
   - Always validate user_id server-side

6. CODE QUALITY
   - TypeScript strict mode
   - Naming: PascalCase for components, kebab-case for files
   - No console.logs in production
   - Comments only for non-obvious logic

GETTING STARTED:
```bash
git clone https://github.com/mawazawa/sacredjournal.git
cd sacredjournal
npm install
cp .env.example .env.local
# Add API keys to .env.local
npm run dev
```

IMPORTANT FILES:
- app/page.tsx - Home page (done)
- app/layout.tsx - Root layout (done)
- lib/stores/auth.ts - Auth state (scaffolded)
- lib/stores/journal.ts - Journal state (scaffolded)
- lib/api/gemini.ts - Gemini integration (scaffolded)
- components/VoiceButton.tsx - Voice recording (done)

WHAT YOU'LL BUILD:
- app/auth/ - Authentication pages
- app/journal/ - Journal interface pages
- app/api/ - All API endpoints
- More components/ - Personality quiz, chat, entry form, etc.
- Database migrations and schema

DESIGN PHILOSOPHY:
- Simple, clean interface focused on voice
- Minimal visual elements
- Personality-aware personalization
- Privacy-first (RLS for all data)
- Mobile-first responsive design

TESTING APPROACH:
- Manual testing of user flows first
- Playwright E2E tests for critical paths
- API testing with Postman/Thunder Client
- Type-safe with TypeScript strict mode

DEPLOYMENT:
When ready:
1. npm run build (must pass)
2. git push to main
3. Vercel auto-deploys
4. App live at sacredjournal.vercel.app

DOCUMENTATION RESOURCES IN REPO:
- RESEARCH.md - Complete feature spec and architecture
- README.md - Project overview
- DEPLOYMENT.md - Vercel setup
- QUICK_START.md - Quick reference
- CLOUD_CODE_WEB_PROMPT.md - Detailed dev guide
- HANDOFF_TO_WEB_AGENT.md - This project handoff

PHASE 2 (After MVP):
- Email integration
- Mistral OCR for image transcription
- Neo4j knowledge graph
- Goal setting and calendar
- Screen time metrics dashboard

START HERE:
1. Read HANDOFF_TO_WEB_AGENT.md (overview)
2. Read CLOUD_CODE_WEB_PROMPT.md (detailed guide)
3. Set up environment (.env.local)
4. npm run dev
5. Start with authentication (items 1-3 on checklist)
6. Work through checklist systematically

COMMIT MESSAGE FORMAT:
feat(auth): implement supabase authentication
fix(journal): correct entry deletion
refactor(api): improve error handling
test(voice): add transcription tests

Include "üß† Generated with Claude Code" in commit messages.

GOOD LUCK! üöÄüß†üé§

Questions? Check:
- CLOUD_CODE_WEB_PROMPT.md for implementation details
- RESEARCH.md for feature specifications
- QUICK_START.md for common tasks
- Existing code for patterns

Ready? Start with: npm run dev
===================================================================
